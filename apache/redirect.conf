ServerName ${SYNCLOUD_DOMAIN}
<VirtualHost *>

    ServerName ${SYNCLOUD_DOMAIN}
    ServerAlias www.${SYNCLOUD_DOMAIN}

    DocumentRoot /var/www/redirect-${SYNCLOUD_ENV}/www/_site

    WSGIScriptAlias /api /var/www/redirect-${SYNCLOUD_ENV}/redirect_web.wsgi
    WSGIDaemonProcess redirect_web user=redirect group=redirect threads=5

    <Directory /var/www/redirect-${SYNCLOUD_ENV}>
        WSGIProcessGroup redirect_web
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
    </Directory>

    CustomLog ${APACHE_LOG_DIR}/redirect_web-access.log combined
    ErrorLog ${APACHE_LOG_DIR}/redirect_web-error.log

</VirtualHost>

<VirtualHost *>

    ServerName api.${SYNCLOUD_DOMAIN}
    ServerAlias *.${SYNCLOUD_DOMAIN}

    WSGIScriptAlias / /var/www/redirect-${SYNCLOUD_ENV}/redirect_rest.wsgi
    WSGIDaemonProcess redirect_rest user=redirect group=redirect threads=5

    <Directory /var/www/redirect-${SYNCLOUD_ENV}>
        WSGIProcessGroup redirect_rest
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
    </Directory>

    CustomLog ${APACHE_LOG_DIR}/redirect_rest-access.log combined
    ErrorLog ${APACHE_LOG_DIR}/redirect_rest-error.log

</VirtualHost>