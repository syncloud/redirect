#!/usr/bin/env python
import os
import shutil
import argparse

def copydir(source, dest, indent = 0):
    """Copy a directory structure overwriting existing files"""
    for root, dirs, files in os.walk(source):
        if not os.path.isdir(root):
            os.makedirs(root)
        for each_file in files:
            rel_path = root.replace(source, '').lstrip(os.sep)
            dest_path = os.path.join(dest, rel_path, each_file)
            shutil.copyfile(os.path.join(root, each_file), dest_path)

if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='This is redirect configuration tool')
    parser.add_argument('--configuration', dest='configuration')
    args = parser.parse_args()

    configuration = args.configuration

    configuration_path = os.path.join('config', configuration)

    copydir(configuration_path, '.')